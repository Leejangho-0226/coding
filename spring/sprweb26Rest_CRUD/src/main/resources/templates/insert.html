<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
function submitMember(){
	const num = document.querySelector("input[name='num']").value;
	const name = document.querySelector("input[name='name']").value;
	const addr = document.querySelector("input[name='addr']").value;
	
	fetch(`/api/members`,{
		method:"POST",
		headers:{
			'Content-Type' : 'application/json'
		},
		body: JSON.stringify({num: num, name: name, addr: addr}) // jsonì„ stringìœ¼ë¡œ ë³€í™˜
	})
	.then(response => {
		if(!response.ok) throw new Error('íšŒì› ì¶”ê°€ ì‹¤íŒ¨');
		return response.json(); // stringì„ jsonìœ¼ë¡œ ë³€í™˜
	})
	.then(data => {
		if(data.isSuccess){ //return Map.of("isSuccess", true); //{"isSuccess" : true} í˜•íƒœë¡œ ì§ë ¬í™”
			alert('íšŒì›ì •ë³´ ì¶”ê°€ ì™„ë£ŒğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰')
			location.href='/members/list'; // ì¶”ê°€ í›„ ëª©ë¡ë³´ê¸°ë¡œ ì´ë™
		}
	})
	.catch(error => {
		console.log('error : ', error);
	});
}

</script>
</head>
<body>
<h2>* ìë£Œ ì¶”ê°€ *</h2>
<form onsubmit="event.preventDefault(); submitMember()">
ë²ˆí˜¸ : <input type="text" name="num"><br>
ì´ë¦„ : <input type="text" name="name"><br>
ì£¼ì†Œ : <input type="text" name="addr"><br>
<input type="submit" value="ë“±ë¡">
</form>
</body>
</html>