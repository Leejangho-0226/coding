<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
function updateMember(){
	const num = document.querySelector("input[name='num']").value;
	const name = document.querySelector("input[name='name']").value;
	const addr = document.querySelector("input[name='addr']").value;
	
	fetch(`/api/members`,{
		method:"PUT",
		headers:{
			'Content-Type' : 'application/json'
		},
		body: JSON.stringify({num: num, name: name, addr: addr}) // jsonì„ stringìœ¼ë¡œ ë³€í™˜
	})
	.then(response => {
		if(!response.ok) throw new Error('íšŒì› ìˆ˜ì • ì‹¤íŒ¨');
		return response.json(); // stringì„ jsonìœ¼ë¡œ ë³€í™˜
	})
	.then(data => {
		if(data.isSuccess){ //return Map.of("isSuccess", true); //{"isSuccess" : true} í˜•íƒœë¡œ ì§ë ¬í™”
			alert('íšŒì›ì •ë³´ ìˆ˜ì • ì™„ë£ŒğŸª„ğŸª„ğŸª„ğŸª„ğŸª„')
			location.href='/members/list'; // ìˆ˜ì • í›„ ëª©ë¡ë³´ê¸°ë¡œ ì´ë™
		}
	})
	.catch(error => {
		console.log('error : ', error);
	});
}
</script>
</head>
<body>
<h2>* ìë£Œ ìˆ˜ì • *</h2>
<form onsubmit="event.preventDefault(); updateMember()">
<input type="hidden" name="num" th:value="${data.num}">
ë²ˆí˜¸ : [[${data.num}]]<br>
ì´ë¦„ : <input type="text" name="name" th:value="${data.name}"><br>
ì£¼ì†Œ : <input type="text" name="addr" th:value="${data.addr}"><br>
<input type="submit" value="ìˆ˜ì •">
</form>
</body>
</html>